<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edges • ggraph</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Edges">
<meta property="og:description" content="ggraph">
<meta property="og:image" content="https://ggraph.data-imaginist.com/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggraph</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Layouts.html">Layouts</a>
    </li>
    <li>
      <a href="../articles/Nodes.html">Nodes</a>
    </li>
    <li>
      <a href="../articles/Edges.html">Edges</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tidygraph.html">Tidygraph interface</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.data-imaginist.com/2019/1-giraffe-2-giraffe-go/">Version 2.0.0</a>
    </li>
    <li>
      <a href="https://www.data-imaginist.com/2017/announcing-ggraph/">Version 1.0.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://tidygraph.data-imaginist.com">tidygraph</a>
</li>
<li>
  <a href="https://github.com/thomasp85/ggraph">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Edges_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Edges</h1>
                        <h4 class="author">Thomas Lin Pedersen</h4>
            
            <h4 class="date">2020-12-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/thomasp85/ggraph/blob/master/vignettes/Edges.Rmd"><code>vignettes/Edges.Rmd</code></a></small>
      <div class="hidden name"><code>Edges.Rmd</code></div>

    </div>

    
    
<p>If the natural <code>ggplot2</code> equivalent to nodes is <code>geom_point()</code>, then surely the equivalent to edges must be <code>geom_segment()</code>? Well, sort of, but there’s a bit more to it than that.</p>
<div class="figure">
<img src="edge_meme_wide.jpg" alt=""><p class="caption">One does not simply draw a line between two nodes</p>
</div>
<p>While nodes are the sensible, mature, and predictably geoms, edges are the edgy (sorry), younger cousins that pushes the boundaries. To put it bluntly:</p>
<blockquote>
<p>On the ggraph savannah you definitely want to be an edge!</p>
</blockquote>
<div id="meet-the-geom_edge_-family" class="section level2">
<h2 class="hasAnchor">
<a href="#meet-the-geom_edge_-family" class="anchor"></a>Meet the <code>geom_edge_*()</code> family</h2>
<p>While the introduction might feel a bit over-the-top it is entirely true. An edge is an abstract concept denoting a relationship between two entities. A straight line is simply just one of many ways this relationship can be visualised. As we saw when <a href="Nodes.html">discussing nodes</a> sometimes it is not drawn at all but impied using containment or position (treemap, circle packing, and partition layouts), but more often it is shown using a line of some sort. This use-case is handled by the large family of edge geoms provided in <code>ggraph</code>. Some of the edges are general while others are dedicated to specific layouts. Let’s creates some graphs for illustrative purposes first:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com">ggraph</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidygraph.data-imaginist.com">tidygraph</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span><span class="op">)</span>

<span class="fu"><a href="../reference/theme_graph.html">set_graph_style</a></span><span class="op">(</span>plot_margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="va">hierarchy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/tbl_graph.html">as_tbl_graph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/hclust.html">hclust</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html">dist</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Class <span class="op">=</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/map_bfs_back.html">map_bfs_back_chr</a></span><span class="op">(</span><span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/node_types.html">node_is_root</a></span><span class="op">(</span><span class="op">)</span>, .f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">node</span>, <span class="va">path</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">leaf</span><span class="op">[</span><span class="va">node</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Species</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">label</span><span class="op">[</span><span class="va">node</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
      <span class="va">species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">path</span><span class="op">$</span><span class="va">result</span><span class="op">)</span><span class="op">)</span>
      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">species</span>
      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
        <span class="cn">NA_character_</span>
      <span class="op">}</span>
    <span class="op">}</span>
  <span class="op">}</span><span class="op">)</span><span class="op">)</span>

<span class="va">hairball</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/tbl_graph.html">as_tbl_graph</a></span><span class="op">(</span><span class="va">highschool</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    year_pop <span class="op">=</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/map_local.html">map_local</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">'in'</span>, .f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">neighborhood</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
      <span class="va">neighborhood</span> <span class="op">%E&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span>decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>,
    pop_devel <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span><span class="op">(</span><span class="va">year_pop</span>, <span class="kw">function</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span> <span class="op">{</span>
      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">'unchanged'</span><span class="op">)</span>
      <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span><span class="op">]</span>,
             <span class="st">'1957'</span> <span class="op">=</span> <span class="st">'decreased'</span>,
             <span class="st">'1958'</span> <span class="op">=</span> <span class="st">'increased'</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>,
    popularity <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_dbl</a></span><span class="op">(</span><span class="va">year_pop</span>, <span class="op">~</span> <span class="va">.</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">%|%</span> <span class="fl">0</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/activate.html">activate</a></span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="link" class="section level3">
<h3 class="hasAnchor">
<a href="#link" class="anchor"></a>Link</h3>
<p>While you don’t have to use a straight line for edges it is certainly possible and <code><a href="../reference/geom_edge_link.html">geom_edge_link()</a></code> is here to serve your needs:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'stress'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>There’s really not much more to it — every edge is simply a straight line between the terminal nodes. Moving on…</p>
</div>
<div id="fan" class="section level3">
<h3 class="hasAnchor">
<a href="#fan" class="anchor"></a>Fan</h3>
<p>Sometimes the graph is not simple, i.e. it has multiple edges between the same nodes. Using links is a bad choice here because edges will overlap and the viewer will be unable to discover parallel edges. <code><a href="../reference/geom_edge_fan.html">geom_edge_fan()</a></code> got you covered here. If there are no parallel edges it behaves like <code><a href="../reference/geom_edge_link.html">geom_edge_link()</a></code> and draws a straight line, but if parallel edges exists it will spread them out as arcs with different curvature. Parallel edges will be sorted by directionality prior to plotting so edges flowing in the same direction will be plotted together:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'stress'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_fan.html">geom_edge_fan</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div id="parallel" class="section level3">
<h3 class="hasAnchor">
<a href="#parallel" class="anchor"></a>Parallel</h3>
<p>An alternative to <code><a href="../reference/geom_edge_fan.html">geom_edge_fan()</a></code> is <code><a href="../reference/geom_edge_parallel.html">geom_edge_parallel()</a></code>. It will draw edges as straight lines but in the case of multi-edges it will offset each edge a bit so they run parallel to each other. As with <code><a href="../reference/geom_edge_fan.html">geom_edge_fan()</a></code> the edges will be sorted by direction first. The offset is done at draw time and will thus remain constant even during resizing:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'stress'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_parallel.html">geom_edge_parallel</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div id="loops" class="section level3">
<h3 class="hasAnchor">
<a href="#loops" class="anchor"></a>Loops</h3>
<p>Loops cannot be shown with regular edges as they have no length. A dedicated <code><a href="../reference/geom_edge_loop.html">geom_edge_loop()</a></code> exists for these cases:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># let's make some of the student love themselves</span>
<span class="va">loopy_hairball</span> <span class="op">&lt;-</span> <span class="va">hairball</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/bind_graphs.html">bind_edges</a></span><span class="op">(</span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, to <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">'1957'</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">loopy_hairball</span>, layout <span class="op">=</span> <span class="st">'stress'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_loop.html">geom_edge_loop</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>The direction, span, and strength of the loop can all be controlled, but in general loops will add a lot of visual clutter to your plot unless the graph is very simple.</p>
</div>
<div id="density" class="section level3">
<h3 class="hasAnchor">
<a href="#density" class="anchor"></a>Density</h3>
<p>This one is definitely strange, and I’m unsure of it’s usefulness, but it is here and it deserves an introduction. Consider the case where it is of interest to see which types of edges dominates certain areas of the graph. You can colour the edges, but edges can tend to get overplotted, thus reducing readability. <code><a href="../reference/geom_edge_density.html">geom_edge_density()</a></code> lets you add a shading to your plot based on the density of edges in a certain area:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'stress'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_density.html">geom_edge_density</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="arcs" class="section level3">
<h3 class="hasAnchor">
<a href="#arcs" class="anchor"></a>Arcs</h3>
<p>While some insists that curved edges should be used in standard <em>“hairball”</em> graph visualisations it really is a poor choice, as it increases overplotting and decreases interpretability for virtually no gain (unless complexity is your thing). That doesn’t mean arcs have no use in graph visualizations. Linear and circular layouts can benefit greatly from them and <code><a href="../reference/geom_edge_arc.html">geom_edge_arc()</a></code> is provided precisely for this scenario:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'linear'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_arc.html">geom_edge_arc</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Arcs behave differently in circular layouts as they will always bend towards the center no matter the direction of the edge (the same thing can be achieved in a linear layout by setting <code>fold = TRUE</code>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'linear'</span>, circular <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_arc.html">geom_edge_arc</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div id="elbow" class="section level3">
<h3 class="hasAnchor">
<a href="#elbow" class="anchor"></a>Elbow</h3>
<p>Aah… The classic dendrogram with its right angle bends. Of course such visualizations are also supported with the <code><a href="../reference/geom_edge_elbow.html">geom_edge_elbow()</a></code>. It goes without saying that this type of edge requires a layout that flows in a defined direction, such as a tree:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hierarchy</span>, layout <span class="op">=</span> <span class="st">'dendrogram'</span>, height <span class="op">=</span> <span class="va">height</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_elbow.html">geom_edge_elbow</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div id="diagonals" class="section level3">
<h3 class="hasAnchor">
<a href="#diagonals" class="anchor"></a>Diagonals</h3>
<p>If right angles aren’t really your thing <code>ggraph</code> provides a smoother version in the form of <code><a href="../reference/geom_edge_diagonal.html">geom_edge_diagonal()</a></code>. This edge is a quadratic bezier with control points positioned at the same x-value as the terminal nodes and halfway in-between the nodes on the y-axis. The result is more organic than the elbows:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hierarchy</span>, layout <span class="op">=</span> <span class="st">'dendrogram'</span>, height <span class="op">=</span> <span class="va">height</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_diagonal.html">geom_edge_diagonal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>It tends to look a bit weird with hugely unbalanced trees so use with care…</p>
</div>
<div id="bends" class="section level3">
<h3 class="hasAnchor">
<a href="#bends" class="anchor"></a>Bends</h3>
<p>An alternative to diagonals are bend edges which are elbow edges with a smoothed corner. It is implemented as a quadratic bezier with control points at the location of the expected elbow corner:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hierarchy</span>, layout <span class="op">=</span> <span class="st">'dendrogram'</span>, height <span class="op">=</span> <span class="va">height</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_bend.html">geom_edge_bend</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div id="hive" class="section level3">
<h3 class="hasAnchor">
<a href="#hive" class="anchor"></a>Hive</h3>
<p>This is certainly a very specific type of edge, intended only for use with hive plots. It draws edges as quadratic beziers with control point positioned perpendicular to the axes of the hive layout:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'hive'</span>, axis <span class="op">=</span> <span class="va">pop_devel</span>, sort.by <span class="op">=</span> <span class="va">popularity</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_hive.html">geom_edge_hive</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_axis_hive.html">geom_axis_hive</a></span><span class="op">(</span>label <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div id="span" class="section level3">
<h3 class="hasAnchor">
<a href="#span" class="anchor"></a>Span</h3>
<p>As with the hive edge the <code><a href="../reference/geom_edge_span.html">geom_edge_span()</a></code> is made in particular for a specific layout - the fabric layout. It draws the edge as a vertical line connecting the horizontal node lines of the layout, potentially with a terminal shape.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'fabric'</span>, sort.by <span class="op">=</span> <span class="fu"><a href="../reference/layout_tbl_graph_fabric.html">node_rank_fabric</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_node_range.html">geom_node_range</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">'grey'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_span.html">geom_edge_span</a></span><span class="op">(</span>end_shape <span class="op">=</span> <span class="st">'circle'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
</div>
<div id="point-and-tile" class="section level3">
<h3 class="hasAnchor">
<a href="#point-and-tile" class="anchor"></a>Point and tile</h3>
<p>It may seem weird to have edge geoms that doesn’t have any span, but the matrix layout calls for exactly that. The terminal nodes of the edge are determined by the vertical and horizontal position of the mark, and for that reason the geom doesn’t need any extend. The point and tile geoms serve the same purpose but are simply different geometry types:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'matrix'</span>, sort.by <span class="op">=</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/search_graph.html">bfs_rank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_point.html">geom_edge_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'matrix'</span>, sort.by <span class="op">=</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/search_graph.html">bfs_rank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_tile.html">geom_edge_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
</div>
<div id="the-three-types-of-edge-geoms" class="section level2">
<h2 class="hasAnchor">
<a href="#the-three-types-of-edge-geoms" class="anchor"></a>The three types of edge geoms</h2>
<p>Almost all edge geoms comes in three variants. The basic variant (no suffix) as well as the variant suffixed with 2 (e.g. <code><a href="../reference/geom_edge_link.html">geom_edge_link2()</a></code>) calculates a number (<code>n</code>) of points along the edge and draws it as a path. The variant suffixed with 0 (e.g. <code><a href="../reference/geom_edge_diagonal.html">geom_edge_diagonal0()</a></code>) uses the build in grid grobs to draw the edges directly (in case of a diagonal it uses <code>bezierGrob()</code>). It might seem strange to have so many different implementations of the same geoms but there’s a reason to the insanity…</p>
<div id="base-variant" class="section level3">
<h3 class="hasAnchor">
<a href="#base-variant" class="anchor"></a>Base variant</h3>
<p>The basic edge geom is drawn by calculating a number of points along the edge path and draw a line between these. This means that you’re in control of the detail level of curved edges and that all complex calculations happens up front. Generally you will see better performance using the base variant rather than the 0-variant that uses grid grobs, unless you set the number of points to calculate to something huge (50–100 is usually sufficient for a smooth look). Apart from better performance you also get a nice bonus (you actually get several, but only one is discussed here): The possibility of drawing a gradient along the edge. Each calculated point gets an index value between 0 and 1 that specifies how far along the edge it is positioned and this value can be used to e.g. map to an alpha level to show the direction of the edge:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hairball</span>, layout <span class="op">=</span> <span class="st">'linear'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_arc.html">geom_edge_arc</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">year</span>, alpha <span class="op">=</span> <span class="fu">stat</span><span class="op">(</span><span class="va">index</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/scale_edge_alpha.html">scale_edge_alpha</a></span><span class="op">(</span><span class="st">'Edge direction'</span>, guide <span class="op">=</span> <span class="st">'edge_direction'</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
</div>
<div id="variant" class="section level3">
<h3 class="hasAnchor">
<a href="#variant" class="anchor"></a>2-variant</h3>
<p>Like the base variant the 2-variant calculates points along the edge and draws a path along them. The difference here is that in this variant you can map node attributes to the edge and the aesthetics are then interpolated along the edge. This is easier to show than to explain:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">hierarchy</span>, layout <span class="op">=</span> <span class="st">'dendrogram'</span>, height <span class="op">=</span> <span class="va">height</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_elbow.html">geom_edge_elbow2</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">node.Class</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>There are considerably more computation going on than in the base variant so unless you need to interpolate values between the terminal nodes you should go with the base variant.</p>
</div>
<div id="variant-1" class="section level3">
<h3 class="hasAnchor">
<a href="#variant-1" class="anchor"></a>0-variant</h3>
<p>This is, sadly, the boring one at the end. You don’t get the luxury of smooth gradients over the edge and often you have a considerably worse performance. What you gain though is tack sharp resolution in the curves so if this is of utmost importance you are covered by this variant.</p>
</div>
</div>
<div id="edge-strength" class="section level2">
<h2 class="hasAnchor">
<a href="#edge-strength" class="anchor"></a>Edge strength</h2>
<p>Many of the edge geoms takes a strength argument that denotes their deviation from a straight line. Setting <code>strength = 0</code> will always result in a straight line, while <code>strength = 1</code> is the default look. Anything in between can be used to modify the look of the edge, while values outside that range will probably result in some weird looks. Some examples are shown below:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">small_tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/create_graphs.html">create_tree</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span>

<span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">small_tree</span>, <span class="st">'dendrogram'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_elbow.html">geom_edge_elbow</a></span><span class="op">(</span>strength <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">small_tree</span>, <span class="st">'dendrogram'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_diagonal.html">geom_edge_diagonal</a></span><span class="op">(</span>strength <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
<div id="decorating-edges" class="section level2">
<h2 class="hasAnchor">
<a href="#decorating-edges" class="anchor"></a>Decorating edges</h2>
<p>An edge is so much more than a line… Well at least it is also potentially an arrow and a label. This section will go into how these can be added. To clearly see the effect here we will use a slightly simpler graph</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Random names - I swear</span>
<span class="va">simple</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/create_graphs.html">create_notable</a></span><span class="op">(</span><span class="st">'bull'</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Thomas'</span>, <span class="st">'Bob'</span>, <span class="st">'Hadley'</span>, <span class="st">'Winston'</span>, <span class="st">'Baptiste'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/activate.html">activate</a></span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'friend'</span>, <span class="st">'foe'</span><span class="op">)</span>, <span class="fl">5</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="arrows" class="section level3">
<h3 class="hasAnchor">
<a href="#arrows" class="anchor"></a>Arrows</h3>
<p>While we saw above that direction can be encoded as a gradient, the good old arrow is still available. As with the standard <code>ggplot2</code> geoms an arrow can be added using the arrow argument:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">simple</span>, layout <span class="op">=</span> <span class="st">'graphopt'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span>arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">4</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>I hope you think <em>Ugh</em> at the sight of this. The edges naturally extend to the node center and nodes are thus drawn on top of the arrow heads. There’s a solution to this in the form of the <code>start_cap</code> and <code>end_cap</code> aesthetics in the base and 2-variant edge geoms (sorry 0-variant). This can be used to start and stop the edge drawing at an absolute distance from the terminal nodes. Watch this:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">simple</span>, layout <span class="op">=</span> <span class="st">'graphopt'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span>arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">4</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span>, 
                 end_cap <span class="op">=</span> <span class="fu"><a href="../reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<p>Using the <code><a href="../reference/geometry.html">circle()</a></code>, <code><a href="../reference/geometry.html">square()</a></code>, <code><a href="../reference/geometry.html">ellipsis()</a></code>, and <code><a href="../reference/geometry.html">rectangle()</a></code> helpers it is possible to get a lot of control over how edges are capped at either end. This works for any edge, curved or not:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">simple</span>, layout <span class="op">=</span> <span class="st">'linear'</span>, circular <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_arc.html">geom_edge_arc</a></span><span class="op">(</span>arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">4</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span>, 
                start_cap <span class="op">=</span> <span class="fu"><a href="../reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">'mm'</span><span class="op">)</span>,
                end_cap <span class="op">=</span> <span class="fu"><a href="../reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
<p>When plotting node labels you often want to avoid that incoming and outgoing edges overlaps with the labels. <code>ggraph</code> provides a helper that calculates the bounding rectangle of the labels and cap edges based on that:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">simple</span>, layout <span class="op">=</span> <span class="st">'graphopt'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>start_cap <span class="op">=</span> <span class="fu"><a href="../reference/geometry.html">label_rect</a></span><span class="op">(</span><span class="va">node1.name</span><span class="op">)</span>,
                     end_cap <span class="op">=</span> <span class="fu"><a href="../reference/geometry.html">label_rect</a></span><span class="op">(</span><span class="va">node2.name</span><span class="op">)</span><span class="op">)</span>, 
                 arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">4</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_node_text.html">geom_node_text</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-24-1.png" width="700"></p>
<p>The capping of edges is dynamic and responds to resizing of the plot so the absolute size of the cap areas are maintained at all time.</p>
<div id="a-quick-note-on-directionality" class="section level4">
<h4 class="hasAnchor">
<a href="#a-quick-note-on-directionality" class="anchor"></a>A quick note on directionality</h4>
<p>In <code>ggraph</code> there is no such thing as an undirected graph. Every edge has a start and an end node. For undirected graphs the start and end of edges is arbitrary but still exists and it is thus possible to add arrowheads to undirected graphs as well. This should not be done of course, but this is the responsibility of the user as <code>ggraph</code> does not make any checks during rendering.</p>
</div>
</div>
<div id="labels" class="section level3">
<h3 class="hasAnchor">
<a href="#labels" class="anchor"></a>Labels</h3>
<p>You would expect that edge labels would be their own geom(s), but <code>ggraph</code> departs from the stringent grammar interpretation here. This is because the label placement is dependent on the choice of edge. Because of this edge labeling is bundled with each edge geom (but not the 0-variant) through the label aesthetic</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">simple</span>, layout <span class="op">=</span> <span class="st">'graphopt'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, 
                 arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">4</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span>, 
                 end_cap <span class="op">=</span> <span class="fu"><a href="../reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-25-1.png" width="700"></p>
<p>Usually you would like the labels to run along the edges, but providing a fixed angle will only work at a very specific aspect ratio. Instead <code>ggraph</code> offers to calculate the correct angle dynamically so the labels always runs along the edge. Furthermore it can offset the label by an absolute length:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">simple</span>, layout <span class="op">=</span> <span class="st">'graphopt'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, 
                 angle_calc <span class="op">=</span> <span class="st">'along'</span>,
                 label_dodge <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">2.5</span>, <span class="st">'mm'</span><span class="op">)</span>,
                 arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">4</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span>, 
                 end_cap <span class="op">=</span> <span class="fu"><a href="../reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-26-1.png" width="700"></p>
<p><code>ggraph</code> offers a lot of additional customization of the edge labels but this shows the main features. As with arrowheads labels can severely clutter your visualization so it is only advisable on very simple graphs.</p>
</div>
</div>
<div id="connections" class="section level2">
<h2 class="hasAnchor">
<a href="#connections" class="anchor"></a>Connections</h2>
<p>The estranged cousin of edges are connections. While edges show the relational nature of the nodes in the graph structure, connections connect nodes that are not connected in the graph. This is done by finding the shortest path between the two nodes. Currently the only connection geom available is <code><a href="../reference/geom_conn_bundle.html">geom_conn_bundle()</a></code> that implements the hierarchical edge bundling technique:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flaregraph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/tbl_graph.html">tbl_graph</a></span><span class="op">(</span><span class="va">flare</span><span class="op">$</span><span class="va">vertices</span>, <span class="va">flare</span><span class="op">$</span><span class="va">edges</span><span class="op">)</span>
<span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="va">flare</span><span class="op">$</span><span class="va">imports</span><span class="op">$</span><span class="va">from</span>, <span class="va">flare</span><span class="op">$</span><span class="va">vertices</span><span class="op">$</span><span class="va">name</span><span class="op">)</span>
<span class="va">to</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="va">flare</span><span class="op">$</span><span class="va">imports</span><span class="op">$</span><span class="va">to</span>, <span class="va">flare</span><span class="op">$</span><span class="va">vertices</span><span class="op">$</span><span class="va">name</span><span class="op">)</span>
<span class="fu"><a href="../reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">flaregraph</span>, layout <span class="op">=</span> <span class="st">'dendrogram'</span>, circular <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_conn_bundle.html">geom_conn_bundle</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/get_con.html">get_con</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">from</span>, to <span class="op">=</span> <span class="va">to</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Edges_files/figure-html/unnamed-chunk-27-1.png" width="700"></p>
<p>The connection concept is underutilized at the moment but I expect to add more support for this in coming releases.</p>
</div>
<div id="want-more" class="section level2">
<h2 class="hasAnchor">
<a href="#want-more" class="anchor"></a>Want more?</h2>
<p>Check out the other vignettes for more information on how to specify <a href="Layouts.html">layouts</a> and draw <a href="Nodes.html">nodes</a>…</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://data-imaginist.com">Thomas Lin Pedersen</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
